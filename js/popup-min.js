var writeUsBtn=document.querySelector(".btn-contacts"),writeUs=document.querySelector(".write-us"),close=document.querySelectorAll(".modal-close"),login=document.querySelector("[name=login]"),email=document.querySelector("[name=email]"),letter=document.querySelector("[name=letter]"),form=document.querySelector(".form"),map=document.querySelector(".map"),modalMap=document.querySelector(".modal-map"),modal=document.querySelectorAll(".modal"),buy=document.querySelectorAll(".btn-buy"),continueShoping=document.querySelector(".modal-btn-continue-shopping"),addItem=document.querySelector(".item-in-basket"),isStorageSupport=!0,storage="";try{storage=localStorage.getItem("email")}catch(err){isStorageSupport=!1}form&&form.addEventListener("submit",function(e){e.preventDefault()}),form&&form.addEventListener("submit",function(e){name.value&&email.value&&letter.value?isStorageSupport&&localStorage.setItem("email",email.value):(e.preventDefault(),writeUs.classList.remove("modal-error"),writeUs.offsetWidth=writeUs.offsetWidth,writeUs.classList.add("modal-error"))}),writeUsBtn&&login&&writeUs&&writeUsBtn.addEventListener("click",function(e){e.preventDefault(),writeUs.classList.remove("modal-closed"),writeUs.classList.add("modal-show"),login.focus(),storage&&(email.value=storage)}),close.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),modal.forEach(function(e){e.classList.add("modal-closed"),e.classList.remove("modal-error"),setTimeout(function(){e.classList.remove("modal-show")},700)})})}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),modal.forEach(function(e){e.classList.add("modal-closed"),e.classList.remove("modal-error"),setTimeout(function(){e.classList.remove("modal-show")},700)}))}),map&&map.addEventListener("click",function(e){e.preventDefault(),modalMap.classList.remove("modal-closed"),modalMap.classList.add("modal-show")}),buy&&addItem&&buy.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),addItem.classList.remove("modal-closed"),addItem.classList.add("modal-show")})}),continueShoping&&continueShoping.addEventListener("click",function(e){e.preventDefault(),addItem.classList.add("modal-closed"),setTimeout(function(){writeUs.classList.remove("modal-show"),writeUs.classList.remove("modal-error")},700)});